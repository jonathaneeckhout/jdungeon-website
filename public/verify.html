<!DOCTYPE html>
<html>

<head>
    <title>JDungeon verify</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <style>
        body {
            background-image: url('assets/img/logo/Logo_BG.png');
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: cover;
        }
    </style>
</head>

<body>
    <div class="container bg-dark text-light">
        <div class="container mt-5">
            <h2>Press button to verify account</h2>
            <button id="verifyButton" class="btn btn-primary">Verify account</button>
            <p id="verifyResult"></p>
        </div>

        <footer class="bg-dark text-light py-3">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <p>&copy; 2023 JDungeon. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script>

        const urlParams = new URLSearchParams(window.location.search);

        const email = urlParams.get("email");
        const code = urlParams.get("code");

        const button = document.getElementById('verifyButton');
        button.addEventListener('click', function () {
            // Your event handler code goes here
            const xhr = new XMLHttpRequest();
            xhr.open('POST', '/verify');
            xhr.setRequestHeader('Content-Type', 'application/json');

            const data = {
                // Your request payload data goes here
                email: email,
                code: code
            };

            xhr.send(JSON.stringify(data));

            xhr.onload = function () {
                const paragraph = document.getElementById('verifyResult');

                if (xhr.status === 200) {
                    // Request succeeded, handle response
                    console.log(xhr.responseText);
                    paragraph.textContent = xhr.responseText;
                } else {
                    // Request failed, handle error
                    console.error('Request failed. Status:', xhr.status);
                    paragraph.textContent = xhr.status;
                }
            };

            xhr.onerror = function () {
                console.error('Request failed. Network error.');
                const paragraph = document.getElementById('verifyResult');
                paragraph.textContent = 'Request failed. Network error.';
            };
        });
    </script>
</body>

</html>